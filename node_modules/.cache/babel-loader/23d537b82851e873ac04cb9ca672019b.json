{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HintCallout = void 0;\nvar react_client_1 = require(\"@speechly/react-client\");\nvar react_1 = __importStar(require(\"react\"));\nvar types_1 = require(\"../types\");\nvar Callout_1 = require(\"./Callout\");\nvar HintCallout = function (props) {\n  var _a = react_1.useState(false),\n    visible = _a[0],\n    setVisible = _a[1];\n  var timeout = react_1.useRef(null);\n  var SHORT_PRESS_TRESHOLD_MS = 600;\n  var INSTRUCTION_PREROLL_MS = 500;\n  var INSTRUCTION_SHOW_TIME_MS = 3000;\n  react_1.useEffect(function () {\n    var subTangentPress = PubSub.subscribe(types_1.SpeechlyUiEvents.TangentPress, function (message, payload) {\n      // console.log('TangentPress', payload.state)\n      hideHints();\n    });\n    var subTangentClick = PubSub.subscribe(types_1.SpeechlyUiEvents.TangentRelease, function (message, payload) {\n      // console.log('TangentRelease ', payload.state, payload.timeMs)\n      // Detect short record button presses\n      if (payload.timeMs < SHORT_PRESS_TRESHOLD_MS) {\n        switch (payload.state) {\n          case react_client_1.SpeechState.Ready:\n          case react_client_1.SpeechState.Recording:\n          case react_client_1.SpeechState.Loading:\n            if (timeout.current === null) {\n              timeout.current = window.setTimeout(function () {\n                setVisible(true);\n                timeout.current = window.setTimeout(function () {\n                  setVisible(false);\n                  timeout.current = null;\n                }, INSTRUCTION_SHOW_TIME_MS);\n              }, INSTRUCTION_PREROLL_MS);\n            }\n        }\n      }\n    });\n    return function () {\n      PubSub.unsubscribe(subTangentPress);\n      PubSub.unsubscribe(subTangentClick);\n    };\n  }, []);\n  var hideHints = function () {\n    setVisible(false);\n    if (timeout.current !== null) {\n      clearTimeout(timeout.current);\n      timeout.current = null;\n    }\n  };\n  return react_1.default.createElement(Callout_1.Callout, {\n    sourceAnchors: {\n      x: '50%',\n      y: '6%'\n    },\n    visible: visible,\n    onClick: function () {\n      return hideHints();\n    }\n  }, \"Hold to talk\");\n};\nexports.HintCallout = HintCallout;","map":{"version":3,"sources":["../../src/components/HintCallout.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,cAAA,GAAA,OAAA,CAAA,wBAAA,CAAA;AACA,IAAA,OAAA,GAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;AACA,IAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA;AACA,IAAA,SAAA,GAAA,OAAA,CAAA,WAAA,CAAA;AAEO,IAAM,WAAW,GAAa,SAAA,CAAA,KAAK,EAAA;EAClC,IAAA,EAAA,GAAwB,OAAA,CAAA,QAAQ,CAAU,KAAK,CAAC;IAA/C,OAAO,GAAA,EAAA,CAAA,CAAA,CAAA;IAAE,UAAU,GAAA,EAAA,CAAA,CAAA,CAA4B;EACtD,IAAM,OAAO,GAAG,OAAA,CAAA,MAAM,CAAgB,IAAI,CAAC;EAE3C,IAAM,uBAAuB,GAAG,GAAG;EACnC,IAAM,sBAAsB,GAAG,GAAG;EAClC,IAAM,wBAAwB,GAAG,IAAI;EAErC,OAAA,CAAA,SAAS,CAAC,YAAA;IACR,IAAM,eAAe,GAAG,MAAM,CAAC,SAAS,CACtC,OAAA,CAAA,gBAAgB,CAAC,YAAY,EAC7B,UAAC,OAAe,EAAE,OAA+B,EAAA;MAC/C;MACA,SAAS,CAAA,CAAE;IACb,CAAC,CACF;IACD,IAAM,eAAe,GAAG,MAAM,CAAC,SAAS,CACtC,OAAA,CAAA,gBAAgB,CAAC,cAAc,EAC/B,UAAC,OAAe,EAAE,OAA+C,EAAA;MAC/D;MACA;MACA,IAAI,OAAO,CAAC,MAAM,GAAG,uBAAuB,EAAE;QAC5C,QAAQ,OAAO,CAAC,KAAK;UACnB,KAAK,cAAA,CAAA,WAAW,CAAC,KAAK;UACtB,KAAK,cAAA,CAAA,WAAW,CAAC,SAAS;UAC1B,KAAK,cAAA,CAAA,WAAW,CAAC,OAAO;YACtB,IAAI,OAAO,CAAC,OAAO,KAAK,IAAI,EAAE;cAC5B,OAAO,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,YAAA;gBAClC,UAAU,CAAC,IAAI,CAAC;gBAChB,OAAO,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,YAAA;kBAClC,UAAU,CAAC,KAAK,CAAC;kBACjB,OAAO,CAAC,OAAO,GAAG,IAAI;gBACxB,CAAC,EAAE,wBAAwB,CAAC;cAC9B,CAAC,EAAE,sBAAsB,CAAC;YAC3B;QACJ;MACF;IACH,CAAC,CACF;IACD,OAAO,YAAA;MACL,MAAM,CAAC,WAAW,CAAC,eAAe,CAAC;MACnC,MAAM,CAAC,WAAW,CAAC,eAAe,CAAC;IACrC,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,IAAM,SAAS,GAAG,SAAA,CAAA,EAAA;IAChB,UAAU,CAAC,KAAK,CAAC;IACjB,IAAI,OAAO,CAAC,OAAO,KAAK,IAAI,EAAE;MAC5B,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC;MAC7B,OAAO,CAAC,OAAO,GAAG,IAAI;IACvB;EACH,CAAC;EAED,OAAO,OAAA,CAAA,OAAA,CAAA,aAAA,CAAC,SAAA,CAAA,OAAO,EAAA;IAAC,aAAa,EAAE;MAAE,CAAC,EAAE,KAAK;MAAE,CAAC,EAAE;IAAI,CAAE;IAAE,OAAO,EAAE,OAAO;IAAE,OAAO,EAAE,SAAA,CAAA,EAAA;MAAM,OAAA,SAAS,CAAA,CAAE;IAAX;EAAW,CAAA,EAAA,cAAA,CAAwB;AAC5H,CAAC;AAtDY,OAAA,CAAA,WAAW,GAAA,WAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HintCallout = void 0;\nvar react_client_1 = require(\"@speechly/react-client\");\nvar react_1 = __importStar(require(\"react\"));\nvar types_1 = require(\"../types\");\nvar Callout_1 = require(\"./Callout\");\nvar HintCallout = function (props) {\n    var _a = react_1.useState(false), visible = _a[0], setVisible = _a[1];\n    var timeout = react_1.useRef(null);\n    var SHORT_PRESS_TRESHOLD_MS = 600;\n    var INSTRUCTION_PREROLL_MS = 500;\n    var INSTRUCTION_SHOW_TIME_MS = 3000;\n    react_1.useEffect(function () {\n        var subTangentPress = PubSub.subscribe(types_1.SpeechlyUiEvents.TangentPress, function (message, payload) {\n            // console.log('TangentPress', payload.state)\n            hideHints();\n        });\n        var subTangentClick = PubSub.subscribe(types_1.SpeechlyUiEvents.TangentRelease, function (message, payload) {\n            // console.log('TangentRelease ', payload.state, payload.timeMs)\n            // Detect short record button presses\n            if (payload.timeMs < SHORT_PRESS_TRESHOLD_MS) {\n                switch (payload.state) {\n                    case react_client_1.SpeechState.Ready:\n                    case react_client_1.SpeechState.Recording:\n                    case react_client_1.SpeechState.Loading:\n                        if (timeout.current === null) {\n                            timeout.current = window.setTimeout(function () {\n                                setVisible(true);\n                                timeout.current = window.setTimeout(function () {\n                                    setVisible(false);\n                                    timeout.current = null;\n                                }, INSTRUCTION_SHOW_TIME_MS);\n                            }, INSTRUCTION_PREROLL_MS);\n                        }\n                }\n            }\n        });\n        return function () {\n            PubSub.unsubscribe(subTangentPress);\n            PubSub.unsubscribe(subTangentClick);\n        };\n    }, []);\n    var hideHints = function () {\n        setVisible(false);\n        if (timeout.current !== null) {\n            clearTimeout(timeout.current);\n            timeout.current = null;\n        }\n    };\n    return react_1.default.createElement(Callout_1.Callout, { sourceAnchors: { x: '50%', y: '6%' }, visible: visible, onClick: function () { return hideHints(); } }, \"Hold to talk\");\n};\nexports.HintCallout = HintCallout;\n//# sourceMappingURL=HintCallout.js.map"]},"metadata":{},"sourceType":"script"}